<app-title  title="Organization Configuration"></app-title>
	<div>
		<ngb-alert *ngIf="alertMessage" [type]= "alertType" [dismissible]="true" (close)="alertMessage = null">
			{{alertMessage}}
		</ngb-alert>
	</div>
<div *ngIf="showEditor">
	<form #orgForm="ngForm">
		<div class="editorForm">
			<h5>{{orgHeader}}</h5>
			<label> Name</label>
			<input type="text"  name="orgname" [(ngModel)]="currentItem.organizationname" #orgname="ngModel" required>
			<div *ngIf="orgname.errors && (orgname.dirty || orgname.touched)" class="alert alert-danger"> Organization Name</div>
			<div class="actionBar">
			<button (click)="updateOrg()" class="btn btn-primary" [disabled]="!orgForm.form.valid">Update</button>
			<button (click)="showEditor=false;" class="btn btn-primary">Cancel</button> 
			</div>
		</div>
	</form>
</div>
<div *ngIf="addNew">
	<form #newForm="ngForm">
		<div class="newForm">
			<h4>{{orgAddHeader}}</h4>
			<table>
				<tr>
					<td> Code</td>
					<td>	
						<input type="text"  name="orgCode" [(ngModel)]="newItem.code" #orgCode="ngModel" required>
							<div *ngIf="orgCode.errors && (orgCode.dirty || orgCode.touched)" class="alert alert-danger"> Organization Code Required</div>
				 	</td>
				</tr>
				<tr>
					<td> Description</td>
					<td>	
						<input type="text"  name="orgName" [(ngModel)]="newItem.organizationname" #orgName="ngModel" required>
							<div *ngIf="orgName.errors && (orgName.dirty || orgName.touched)" class="alert alert-danger"> Organization Name Required</div>
				 	</td>
				</tr>
				<tr>
					<td colspan="2">
					<div class="actionBar">
						<button (click)="addOrg()" class="btn btn-primary" [disabled]="!newForm.form.valid">Update</button>
						<button (click)="addNew=false;" class="btn btn-primary">Cancel</button> 
					</div>
						
					</td>
				</tr>
			</table>
		</div>
	</form>
</div>
<div style="display: flex; flex-wrap: wrap;">
	<div class="col-xs-12 col-sm-6 col-md-6 xol-lg-6 orgbar">
		<div class="orgbarInner">
			<span>Utility </span>
			<span class="fa-small fa-plus-circle" (click)="add(1,'Utility')"></span>
			<div *ngIf=" org1 != undefined && org1.length > 0 " >
		
				<table class="table table-responsive col-md-12 mytable">
					<tr *ngFor="let item of org1"> 
						<td> <span (click)="getMembers(item,org2,1)" class="fa-small fa-arrow-circle-right">  </span> {{item.organizationname}}</td>
						<td> <span (click)="edit('Utility', item)" class="fa-small fa-edit"></span> </td>
						<td> <span (click)="delete(item)" class="fa-small fa-remove"></span> </td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<div class="col-xs-12 col-sm-6 col-md-6 xol-lg-6 orgbar">
		<div class="orgbarInner" *ngIf="parent1 != null">
			<span>Sub Division</span>
			<span class="fa-small fa-plus-circle" (click)="add(2,'Sub Division')"></span>
			<div *ngIf=" org2 != undefined && org2.length > 0 " >

				<table class="table table-responsive col-md-12 mytable">
					<tr *ngFor="let item of org2"> 
						<td> <span (click)="getMembers(item,org3,2)" class="fa-small fa-arrow-circle-right"> </span> {{item.organizationname}}</td>
						<td> <span (click)="edit('Sub Division', item)" class="fa-small fa-edit"></span> </td>
						<td> <span (click)="delete(item)" class="fa-small fa-remove"></span> </td>
					</tr>
				</table>
			</div>
			</div>
	</div>
		<div class="col-xs-12 col-sm-6 col-md-6 xol-lg-6 orgbar">
			<div class="orgbarInner" *ngIf="parent2 != null" >
			<span>Service Station</span>
			<span class="fa-small fa-plus-circle" (click)="add(4,'Service Station')"></span>

			<div *ngIf=" org3 != undefined && org3.length > 0 " >

				<table class="table table-responsive col-md-12 mytable">
					<tr *ngFor="let item of org3"> 
						<td> <span (click)="getMembers(item,org4,3)" class="fa-small fa-arrow-circle-right">  </span> {{item.organizationname}}</td>
						<td> <span (click)="edit('Service Station', item)" class="fa-small fa-edit"></span> </td>
						<td> <span (click)="delete(item)" class="fa-small fa-remove"></span> </td>
					</tr>
				</table>
			</div>
		</div>
	</div>
		<div class="col-xs-12 col-sm-6 col-md-6 xol-lg-6 orgbar">
		<div class="orgbarInner" *ngIf="parent3 != null">
			<span>Location</span>
			<span class="fa-small fa-plus-circle" (click)="add(3,'Location')"></span>		
			<div *ngIf=" org4 != undefined && org4.length > 0 " >


				<table class="table table-responsive col-md-12 mytable">
					<tr *ngFor="let item of org4"> 
						<td>  {{item.organizationname}}</td>
						<td> <span (click)="edit('Location', item)" class="fa-small fa-edit"></span> </td>
						<td> <span (click)="delete(item)" class="fa-small fa-remove"></span> </td>
					</tr>
				</table>
			</div>
		</div>
	</div>		
</div>